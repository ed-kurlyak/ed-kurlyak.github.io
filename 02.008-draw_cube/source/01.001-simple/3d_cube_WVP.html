<!DOCTYPE html>
<html>
<head>
	<title></title>


<script type="text/javascript">

class vertex3
{

constructor(ix, iy, iz)
{
this.x = ix;
this.y = iy;
this.z = iz;
}

};

var ePT = {
A : 0,
B : 1,
C : 2,
D : 3,
E : 4,
F : 5,
G : 6,
H : 7 };

var vert_buff = Array(
new vertex3(-4.0, -4.0, -4.0),
new vertex3( 4.0, -4.0, -4.0),
new vertex3(-4.0,  4.0, -4.0),
new vertex3( 4.0,  4.0, -4.0),

new vertex3(-4.0, -4.0,  4.0),
new vertex3( 4.0, -4.0,  4.0),
new vertex3(-4.0,  4.0,  4.0),
new vertex3( 4.0,  4.0,  4.0) );

var vert_buff_transformed = Array(
new vertex3(0.0, 0.0,  0.0),
new vertex3(0.0, 0.0,  0.0),
new vertex3(0.0, 0.0,  0.0),
new vertex3(0.0, 0.0,  0.0),

new vertex3(0.0, 0.0,  0.0),
new vertex3(0.0, 0.0,  0.0),
new vertex3(0.0, 0.0,  0.0),
new vertex3(0.0, 0.0,  0.0) );



/*
	front side		back side
	C - D 			G - H
	|	|			|	|
	A - B			E - F

*/

var index_buff = Array(
ePT.A, ePT.B,
ePT.B, ePT.D,
ePT.D, ePT.C,
ePT.C, ePT.A,

ePT.E, ePT.F,
ePT.F, ePT.H,
ePT.H, ePT.G,
ePT.G, ePT.E,

ePT.A, ePT.E,
ePT.B, ePT.F,
ePT.D, ePT.H,
ePT.C, ePT.G );

angle = 0.0;

setInterval("Draw_Cube()", 25)

function Vec3_Mat4x4_Mul(v, m)
{

t = new vertex3();


t.x = 	v.x * m[0][0] + 
		v.y * m[1][0] + 
		v.z * m[2][0] + 
			m[3][0];

t.y = 	v.x * m[0][1] + 
		v.y * m[1][1] + 
		v.z * m[2][1] + 
			m[3][1]

t.z = 	v.x * m[0][2] + 
		v.y * m[1][2] + 
		v.z * m[2][2] + 
			m[3][2]

return t;
}


function Vec3_Normalize(v)
{

t = new vertex3();


len = Math.sqrt( v.x * v.x + v.y * v.y + v.z * v.z);

t.x = v.x / len;
t.y = v.y / len;
t.z = v.z / len;

return t;

}

function Vec3_Cross(v1, v2)
{

t = new vertex3();

t.x = v1.y * v2.z - v1.z * v2.y;
t.y = v1.z * v2.x - v1.x * v2.z;
t.z = v1.x * v2.y - v1.y * v2.x;

return t;
}


function Vec3_Dot(v1, v2)
{

t = v1.x * v2.x + v1.y * v2.y + v1.z * v2.z;
return t;

}

function Draw_Cube()
{

	var mxRotateY = [
	[Math.cos(angle),	0.0,	Math.sin(angle),	0.0 ],
	[0.0,				1.0, 	0.0,				0.0 ],
	[-Math.sin(angle), 	0.0, 	Math.cos(angle), 	0.0 ],
	[0.0,				0.0,	0.0,				1.0 ] ];


	vRight = new vertex3(1.0, 0.0, 0.0);
	vUp = new vertex3(0.0, 1.0, 0.0);
	vPos = new vertex3(0.0, 10.0, -20.0);
	vLook = new vertex3(-1.0 * vPos.x, -1.0 * vPos.y, -1.0 * vPos.z);

	vLook = Vec3_Normalize(vLook);

	vUp = Vec3_Cross(vLook, vRight);

	vUp = Vec3_Normalize(vUp);
	vRight = Vec3_Cross(vUp, vLook);
	vRight = Vec3_Normalize(vRight);

	xp = - Vec3_Dot(vPos, vRight);
	yp = - Vec3_Dot(vPos, vUp);
	zp = - Vec3_Dot(vPos, vLook);

	var mxView = [
	[vRight.x, vUp.x, vLook.x, 0.0],
	[vRight.y, vUp.y, vLook.y, 0.0],
	[vRight.z, vUp.z, vLook.z, 0.0],
	[xp , yp, zp, 1.0] ];

	for (  i = 0; i < 8; i++)
	{

		my_var = Vec3_Mat4x4_Mul(vert_buff[i], mxRotateY);
		my_var = Vec3_Mat4x4_Mul(my_var, mxView);

		x = my_var.x;
		y = my_var.y;
		z = my_var.z;

		//z = z + 20.0;
		x = x / (750.0 / 500.0);
		
		x = x / z;
		y = y / z;

		vert_buff_transformed[i].x = x * 750.0 / 2.0 + 750.0 / 2.0;
		vert_buff_transformed[i].y = -y * 500.0 / 2.0 + 500.0 / 2.0;
	}

	var ctx = document.getElementById('canvas').getContext('2d');
	ctx.clearRect(0, 0, 750, 500);
	ctx.beginPath();	
	ctx.lineWidth = 5;

	for ( i = 0; i < 12; i++)
	{
		x1 = vert_buff_transformed[ index_buff[ i * 2 ]].x;
		y1 = vert_buff_transformed[ index_buff[ i * 2 ]].y;

		x2 = vert_buff_transformed[ index_buff[ i * 2 + 1 ]].x;
		y2 = vert_buff_transformed[ index_buff[ i * 2 + 1 ]].y;

		ctx.moveTo(x1, y1);
		ctx.lineTo(x2, y2);
	}

	ctx.stroke();          // РћС‚РѕР±СЂР°Р¶Р°РµС‚ РїСѓС‚СЊ

	angle = angle + (3.1415926 / 100.0);
	if(angle > (3.1415926 * 2.0) )
		angle = 0.0;

}


</script>

</head>
<body>

<canvas id="canvas" width="750" height="500"></canvas>

</body>
</html>