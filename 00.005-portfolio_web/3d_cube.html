<!DOCTYPE html>
<html>
<head>
<title>JavaScript Example</title>


<script type="text/javascript">

class vertex3 {
	constructor(ix, iy, iz)
	{
		this.x = ix;
		this.y = iy;
		this.z = iz;
	}
};

var ePT = {
	A : 0,
	B : 1,
	C : 2,
	D : 3,
	E : 4,
	F : 5,
	G : 6,
	H : 7 };


var my_vert = [	new vertex3(-5.0, -5.0, -5.0),	/* A */
			new vertex3( 5.0, -5.0, -5.0),	/* B */
			new vertex3(-5.0,  5.0, -5.0),	/* C */
			new vertex3( 5.0,  5.0, -5.0),	/* D */

			new vertex3(-5.0, -5.0,  5.0),	/* E */
			new vertex3( 5.0, -5.0,  5.0),	/* F */
			new vertex3(-5.0,  5.0,  5.0),	/* G */
			new vertex3( 5.0,  5.0,  5.0) ];	/* H */


var my_t_vert = [new vertex3(0.0, 0.0, 0.0),
			new vertex3( 0.0, 0.0, 0.0),
			new vertex3(0.0,  0.0, 0.0),
			new vertex3( 0.0,  0.0, 0.0),

			new vertex3(0.0, 0.0,  0.0),
			new vertex3( 0.0, 0.0,  0.0),
			new vertex3(0.0,  0.0,  0.0),
			new vertex3( 0.0,  0.0,  0.0) ];


	/*
	front side		back side
	C - D    		G - H
	|	|			|   |
	A - B 			E - F
	*/

	var my_index =  [ 
	ePT.A,	ePT.B,	ePT.B,	ePT.D,	ePT.D,	ePT.C,	ePT.C,	ePT.A,
	ePT.E,	ePT.F,	ePT.F,	ePT.H,	ePT.H,	ePT.G,	ePT.G,	ePT.E,
	ePT.A,	ePT.E,	ePT.B,	ePT.F,	ePT.D,	ePT.H,	ePT.C,	ePT.G ];


setInterval("Draw_Cube()", 25)

angle = 0.0;


function Vec3_Mat4x4_Mul(v, m)
{

t = new vertex3();


t.x = 	v.x * m[0][0] + 
		v.y * m[1][0] + 
		v.z * m[2][0] + 
			m[3][0];

t.y = 	v.x * m[0][1] + 
		v.y * m[1][1] + 
		v.z * m[2][1] + 
			m[3][1]

t.z = 	v.x * m[0][2] + 
		v.y * m[1][2] + 
		v.z * m[2][2] + 
			m[3][2]

return t;
}


function Vec3_Normalize(v)
{

t = new vertex3();


len = Math.sqrt( v.x * v.x + v.y * v.y + v.z * v.z);

t.x = v.x / len;
t.y = v.y / len;
t.z = v.z / len;

return t;

}

function Vec3_Cross(v1, v2)
{

t = new vertex3();

t.x = v1.y * v2.z - v1.z * v2.y;
t.y = v1.z * v2.x - v1.x * v2.z;
t.z = v1.x * v2.y - v1.y * v2.x;

return t;
}


function Vec3_Dot(v1, v2)
{

t = v1.x * v2.x + v1.y * v2.y + v1.z * v2.z;
return t;

}

function Draw_Cube()
{

	var mxRotateY = [
	[Math.cos(angle),	0.0,	Math.sin(angle),	0.0 ],
	[0.0,				1.0, 	0.0,				0.0 ],
	[-Math.sin(angle), 	0.0, 	Math.cos(angle), 	0.0 ],
	[0.0,				0.0,	0.0,				1.0 ] ];


	vRight = new vertex3(1.0, 0.0, 0.0);
	vUp = new vertex3(0.0, 1.0, 0.0);
	vPos = new vertex3(0.0, 10.0, -20.0);
	vLook = new vertex3(-1.0 * vPos.x, -1.0 * vPos.y, -1.0 * vPos.z);

	vLook = Vec3_Normalize(vLook);

	vUp = Vec3_Cross(vLook, vRight);

	vUp = Vec3_Normalize(vUp);
	vRight = Vec3_Cross(vUp, vLook);
	vRight = Vec3_Normalize(vRight);

	xp = - Vec3_Dot(vPos, vRight);
	yp = - Vec3_Dot(vPos, vUp);
	zp = - Vec3_Dot(vPos, vLook);

	var mxView = [
	[vRight.x, vUp.x, vLook.x, 0.0],
	[vRight.y, vUp.y, vLook.y, 0.0],
	[vRight.z, vUp.z, vLook.z, 0.0],
	[xp , yp, zp, 1.0] ];

	for (  i = 0; i < 8; i++)
	{

		my_var = Vec3_Mat4x4_Mul(my_vert[i], mxRotateY);
		my_var = Vec3_Mat4x4_Mul(my_var, mxView);

		x = my_var.x;
		y = my_var.y;
		z = my_var.z;

		x = x / (750.0 / 500.0);
		
		x = x / z;
		y = y / z;

		my_t_vert[i].x = x * 750.0 / 2.0 + 750.0 / 2.0;
		my_t_vert[i].y = -y * 500.0 / 2.0 + 500.0 / 2.0;
	}

	var ctx = document.getElementById('canvas').getContext('2d');
	ctx.clearRect(0, 0, 750, 500);
	ctx.beginPath();	
	ctx.lineWidth = 5;

	for ( i = 0; i < 12; i++)
	{
		x1 = my_t_vert[ my_index[ i * 2 ]].x;
		y1 = my_t_vert[ my_index[ i * 2 ]].y;

		x2 = my_t_vert[ my_index[ i * 2 + 1 ]].x;
		y2 = my_t_vert[ my_index[ i * 2 + 1 ]].y;

		ctx.moveTo(x1, y1);
		ctx.lineTo(x2, y2);
		

	}

	ctx.stroke();

	angle = angle + (3.1415926 / 100.0);
	if(angle > (3.1415926 * 2.0) )
		angle = 0.0;

}

</script>

</head>
<body>


<font size=6>JavaScript Example</font>
<br>

<canvas id="canvas" width="750" height="500"></canvas>

</body>
</html>